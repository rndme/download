(function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.download=t()})(this,function(){return function e(t,n,o){function a(e){var t=e.split(/[:;,]/),n=t[1],o=e.indexOf("charset")>0?3:2,a="base64"==t[o]?atob:decodeURIComponent,r=a(t.pop()),i=r.length,d=0,c=new Uint8Array(i);for(d;d<i;++d)c[d]=r.charCodeAt(d);return new b([c],{type:n})}function r(e,t){if("download"in p)return p.href=e,p.setAttribute("download",h),p.className="download-js-link",p.innerHTML="downloading...",p.style.display="none",p.addEventListener("click",function(e){e.stopPropagation(),this.removeEventListener("click",arguments.callee)}),document.body.appendChild(p),setTimeout(function(){p.click(),document.body.removeChild(p),t===!0&&setTimeout(function(){c.URL.revokeObjectURL(p.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}var i,d,c=window,s="application/octet-stream",l=o||s,f=t,u=!n&&!o&&f,p=document.createElement("a"),m=function(e){return String(e)},b=c.Blob||c.MozBlob||c.WebKitBlob||m,h=n||"download";if(b=b.call?b.bind(c):Blob,"true"===String(this)&&(f=[f,l],l=f[0],f=f[1]),u&&u.length<2048&&(h=u.split("?").shift().split("/").pop(),p.href=u,p.href.indexOf(u)!==-1)){var w=new XMLHttpRequest;return w.open("GET",u,!0),w.responseType="blob",w.onload=function(t){e(t.target.response,h,s)},setTimeout(function(){w.send()},0),w}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(f)){if(!(f.length>2096103.424&&b!==m))return navigator.msSaveBlob?navigator.msSaveBlob(a(f),h):r(f);f=a(f),l=f.type||s}else if(/([\x80-\xff])/.test(f)){var v=0,g=new Uint8Array(f.length),y=g.length;for(v;v<y;++v)g[v]=f.charCodeAt(v);f=new b([g],{type:l})}if(i=f instanceof b?f:new b([f],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(i,h);if(c.URL)r(c.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===m)try{return r("data:"+l+";base64,"+c.btoa(i))}catch(e){return r("data:"+l+","+encodeURIComponent(i))}d=new FileReader,d.onload=function(e){r(this.result)},d.readAsDataURL(i)}return!0}});